<!DOCTYPE html>
<html>
<head>

  <script type="module">
  import supabase from '../supabase.js'

  const { data: { session } } = await supabase.auth.getSession()

  if (!session) {
    window.location.href = "/login.html"
  }

const { data: profile } = await supabase
  .from('profiles')
  .select('dashboard_url')
  .eq('email', session.user.email)
  .single()

// Si no tiene perfil o intenta entrar a otra marca
if (!profile || profile.dashboard_url !== "/brands/carton.html") {
  window.location.href = "/login.html"
}

    const logoutBtn = document.getElementById("logoutBtn")

logoutBtn.addEventListener("click", async () => {
  await supabase.auth.signOut()
  window.location.href = "/login.html"
})

</script>

  <title>Velium | CartÃ³n</title>
  <style>
    body {
      background: #fffaf3;
      font-family: Inter, sans-serif;
      text-align: center;
      padding-top: 100px;
    }

    h1 {
      color: #6b4f1d;
    }
  </style>
</head>
<body>

<img src="../velium-logo.svg" style="height:80px">

<h1>Bienvenido a tu experiencia CartÃ³n ğŸ“¦</h1>
<p>Esto es Velium personalizado para tu empresa</p>
<button id="logoutBtn">Cerrar sesiÃ³n</button>

</body>
</html>
